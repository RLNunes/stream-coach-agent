<!DOCTYPE html>
<html lang="pt">
  <head>
    <!-- Manter head conforme original -->
    <meta charset="UTF-8" />
    <title>Stream Coach ‚Äî Documenta√ß√£o</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css" />

    <!-- Estilo base + Dark autom√°tico -->
    <style>
      /* Ajustes de branding na sidebar (t√≠tulo centrado + espa√ßamento) */
      .app-name-link {
        display: flex !important;
        align-items: center;
        justify-content: center;
        gap: 10px;
        padding: 14px 12px;
        margin: 6px 10px 12px;
        border-radius: 8px;
      }

      /* Dark autom√°tico (quando n√£o h√° tema for√ßado) */
      @media (prefers-color-scheme: dark) {
        :root { color-scheme: dark; }
        body { background: #0f172a; }
        .markdown-section { color: #e2e8f0; }
        .markdown-section a { color: #93c5fd; }
        .sidebar, .sidebar ul { background: #0b1220; }
        .sidebar a { color: #cbd5e1; }
        .app-name-link, .app-name-link img + span { color: #e2e8f0 !important; }
        .search .results-panel { background: #0b1220; color: #e2e8f0; }
      }

      /* Bot√£o do tema - MELHORADO COM CONTRASTE */
      .theme-toggle {
        position: fixed; top: 12px; right: 12px; z-index: 9999;
        padding: 6px 10px; border-radius: 10px; font-size: 13px;
        background: rgba(0,0,0,0.1); backdrop-filter: blur(6px); cursor: pointer;
        border: 1px solid rgba(0,0,0,0.15);
        color: #333;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }
      @media (prefers-color-scheme: dark) {
        .theme-toggle { 
          background: rgba(255,255,255,0.12); 
          color: #e2e8f0; 
          border-color: rgba(255,255,255,0.2);
          box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
      }

      /* ===== Temas for√ßados (Light/Dark) ‚Äî sobrep√µem o autom√°tico ===== */
      :root[data-theme="dark"] { color-scheme: dark; }
      :root[data-theme="dark"] body { background:#0f172a; }
      :root[data-theme="dark"] .markdown-section { color:#e2e8f0; }
      :root[data-theme="dark"] .markdown-section a { color:#93c5fd; }
      :root[data-theme="dark"] .sidebar, :root[data-theme="dark"] .sidebar ul { background:#0b1220; }
      :root[data-theme="dark"] .sidebar a { color:#cbd5e1; }
      :root[data-theme="dark"] .app-name-link, :root[data-theme="dark"] .app-name-link img + span { color:#e2e8f0 !important; }
      :root[data-theme="dark"] .search .results-panel { background:#0b1220; color:#e2e8f0; }
      :root[data-theme="dark"] .theme-toggle { 
        background: rgba(255,255,255,0.12); 
        color: #e2e8f0; 
        border-color: rgba(255,255,255,0.2);
        box-shadow: 0 1px 3px rgba(0,0,0,0.3);
      }

      /* For√ßar Light (neutraliza o @media dark) */
      :root[data-theme="light"] { color-scheme: light; }
      :root[data-theme="light"] body { background:#fff; }
      :root[data-theme="light"] .markdown-section { color:#2c3e50; }
      :root[data-theme="light"] .markdown-section a { color:#42b983; }
      :root[data-theme="light"] .sidebar, :root[data-theme="light"] .sidebar ul { background:#fff; }
      :root[data-theme="light"] .sidebar a { color:#34495e; }
      :root[data-theme="light"] .app-name-link, :root[data-theme="light"] .app-name-link img + span { color:#2c3e50 !important; }
      :root[data-theme="light"] .search .results-panel { background:#fff; color:#2c3e50; }
      :root[data-theme="light"] .theme-toggle { 
        background: rgba(0,0,0,0.1); 
        color: #333; 
        border-color: rgba(0,0,0,0.15);
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }
      
      /* Melhorias para bot√£o da sidebar em dark mode */
      :root[data-theme="dark"] .sidebar-toggle {
        background-color: rgba(255,255,255,0.12);
        border-color: rgba(255,255,255,0.2);
      }
      
      :root[data-theme="dark"] .sidebar-toggle span {
        background-color: #cbd5e1;
      }
      
      @media (prefers-color-scheme: dark) {
        .sidebar-toggle {
          background-color: rgba(255,255,255,0.12);
          border-color: rgba(255,255,255,0.2);
        }
        .sidebar-toggle span {
          background-color: #cbd5e1;
        }
      }
    </style>
  </head>

  <body>
    <div id="app"></div>
    <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">üåô Dark</button>

    <script>
      const PROJECT_VERSION = "0.1.0"; // atualiza quando fizeres release

      window.$docsify = {
        name: "Stream Coach ‚Äî Agent",
        repo: "RLNunes/stream-coach-agent",
        loadSidebar: true,
        subMaxLevel: 2,
        auto2top: true,
        homepage: "README.md",
        search: { paths: "auto", placeholder: "Pesquisar...", noData: "Sem resultados" },
        plugins: [
          function (hook, vm) {
            hook.afterEach(function (html, next) {
              const updated = new Date().toLocaleDateString("pt-PT", { year: "numeric", month: "short", day: "2-digit" });
              const footer = `
                <hr/>
                <footer style="font-size:14px;opacity:.8;display:flex;gap:12px;flex-wrap:wrap;align-items:center;">
                  <span>üìö Docs</span><span>‚Ä¢</span>
                  <span>Vers√£o <strong>${PROJECT_VERSION}</strong></span><span>‚Ä¢</span>
                  <span>Atualizado: ${updated}</span>
                  <span style="margin-left:auto;">
                    <a href="https://github.com/RLNunes/stream-coach-agent" target="_blank" rel="noopener">GitHub</a>
                  </span>
                </footer>`;
              next(html + footer);
            });
          },
        ],
      };
    </script>

    <!-- Toggle Light/Dark/Auto - CORRIGIDO -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const KEY = "sc-theme";                 // 'light' | 'dark' | null (auto)
        const btn = document.getElementById("themeToggle");
        
        if (!btn) {
          console.error("Bot√£o de tema n√£o encontrado!");
          return;
        }

        function applyTheme(t) {
          if (!t) document.documentElement.removeAttribute("data-theme");
          else document.documentElement.setAttribute("data-theme", t);

          // Estado visual do bot√£o
          const isDark = t
            ? t === "dark"
            : window.matchMedia("(prefers-color-scheme: dark)").matches;
          btn.textContent = isDark ? "‚òÄÔ∏è Light" : "üåô Dark";
          btn.setAttribute("aria-pressed", String(isDark));
          btn.title = t ? `Tema: ${t}` : "Tema: auto";
        }

        function setTheme(next) {
          if (!next) localStorage.removeItem(KEY);
          else localStorage.setItem(KEY, next);
          applyTheme(next);
        }

        // Inicial
        applyTheme(localStorage.getItem(KEY));

        // Atualiza quando o sistema muda (se em auto)
        window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", () => {
          if (!localStorage.getItem(KEY)) applyTheme(null);
        });

        // Clique normal ‚Üí alterna entre dark/light
        btn.addEventListener("click", () => {
          const cur = localStorage.getItem(KEY);
          const next = cur === "dark" ? "light" : "dark";
          setTheme(next);
        });

        // Clique direito ou clique do meio ‚Üí volta a AUTO
        btn.addEventListener("contextmenu", (e) => { e.preventDefault(); setTheme(null); });
        btn.addEventListener("auxclick", (e) => { if (e.button === 1) setTheme(null); });
      });
    </script>

    <!-- Docsify core + search -->
    <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.min.js"></script>
  </body>
</html>